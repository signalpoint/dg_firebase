dg.createModule("dg_firebase"),dg_firebase.initializeApp=function(){var e={apiKey:dg_google.apiKey("firebase"),messagingSenderId:dg_google.getConfig("firebase","messagingSenderId")};firebase.initializeApp(e)},dg_firebase.libraries=function(){var e={};return e.firebase={js:[{_attributes:{src:"https://www.gstatic.com/firebasejs/4.6.2/firebase.js"}}]},e.app={js:[{_attributes:{src:"https://www.gstatic.com/firebasejs/4.6.2/firebase-app.js"}}]},e.messaging={js:[{_attributes:{src:"https://www.gstatic.com/firebasejs/4.6.2/firebase-messaging.js"}}]},e},dg_firebase.initializeMessaging=function(){return new Promise(function(e,i){const s=firebase.messaging();navigator.serviceWorker.register("./firebase-messaging-sw.js").then(function(i){s.useServiceWorker(i),s.requestPermission().then(function(){console.log("Notification permission granted."),s.getToken().then(function(i){i?(console.log("token retrieved",i),e(i)):console.log("No Instance ID token available. Request permission to generate one.")}).catch(function(e){console.log("An error occurred while retrieving token. ",e)})}).catch(function(e){console.log("Unable to get permission to notify.",e)}),s.onTokenRefresh(function(){s.getToken().then(function(e){console.log("Token refreshed.",e)}).catch(function(e){console.log("Unable to retrieve refreshed token ",e)})})})})};